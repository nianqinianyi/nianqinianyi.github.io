---
title: Rust å­¦ä¹ ç¬”è®° 02 - å¸¸é‡ã€å˜é‡å’Œæ•°æ®ç±»å‹
tags: [Rust, å­¦ä¹ , ç¬”è®°]
categories: [Rust]
date: 2025-06-30 11:43:08 +08:00
description: Rustä¸­ï¼Œå¸¸é‡ã€å˜é‡ï¼ˆåŒ…å«å¯å˜æ€§ï¼‰å’Œé™æ€å˜é‡çš„å®šä¹‰ä¸åŒºåˆ«ï¼Œä»¥åŠå…¶æ ‡é‡å’Œå¤åˆæ•°æ®ç±»å‹çš„ç‰¹æ€§å‡æœ‰è¯¦å°½é˜è¿°ã€‚
articleGPT: Rustå¸¸é‡ç”¨constå®šä¹‰ï¼Œç¼–è¯‘æ—¶ç¡®å®šå€¼ï¼Œå¿…é¡»æŒ‡å®šç±»å‹ä¸”ä¸èƒ½æ›´æ”¹æˆ–é‡ç»‘å®šã€‚å˜é‡åˆ†ä¸ºletï¼ˆé»˜è®¤ä¸å¯å˜ä½†å¯é‡ç»‘å®šï¼‰å’Œlet mutï¼ˆå¯å˜ï¼‰ã€‚å¸¸é‡å’Œå˜é‡éƒ½éœ€å£°æ˜åˆå§‹åŒ–ï¼Œç±»å‹ç¼–è¯‘æ—¶ç¡®å®šã€‚å¸¸é‡ä¸å˜é‡ä¸»è¦åŒºåˆ«åœ¨äºç±»å‹å£°æ˜ã€ç»‘å®šè¡¨è¾¾å¼ã€ä½œç”¨åŸŸåŠé‡ç»‘å®šèƒ½åŠ›ã€‚é™æ€å˜é‡ç”¨staticå®šä¹‰ï¼Œç¨‹åºå…¨ç¨‹å­˜åœ¨ï¼Œä¸å¸¸é‡ç±»ä¼¼ä½†è¾ƒå°‘ç”¨ã€‚Rustæ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œæ•°æ®ç±»å‹åˆ†æ ‡é‡å’Œå¤åˆã€‚æ ‡é‡åŒ…æ‹¬æ•´å‹ï¼ˆæœ‰ç¬¦å·/æ— ç¬¦å·ï¼Œä¸åŒä½é•¿ï¼‰ã€æµ®ç‚¹å‹ï¼ˆf32/f64ï¼‰ã€å¸ƒå°”å‹ï¼ˆtrue/falseï¼‰å’Œå­—ç¬¦å‹ï¼ˆcharï¼ŒUnicodeï¼‰ã€‚å¤åˆç±»å‹æœ‰å…ƒç»„ï¼ˆå¯å«ä¸åŒç±»å‹ï¼Œé€šè¿‡ä¸‹æ ‡æˆ–è§£æ„è®¿é—®ï¼‰å’Œæ•°ç»„ï¼ˆå›ºå®šé•¿åº¦ï¼Œå…ƒç´ åŒç±»å‹ï¼Œé€šè¿‡ä¸‹æ ‡å’Œåˆ‡ç‰‡è®¿é—®ï¼‰ã€‚
broadcast: true
---

# å¸¸é‡

Rust ä¸­çš„å¸¸é‡ç”¨å…³é”®å­— `const` å®šä¹‰ï¼Œå¸¸é‡çš„å€¼åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šäº†ï¼Œä¸èƒ½åœ¨ä¹‹åæ”¹å˜ã€‚å¸¸é‡è¦åœ¨å®šä¹‰çš„æ—¶å€™æŒ‡å®šç±»å‹ã€‚

```rust
fn main(){
    const x: i32 = 5;
    println!("x = {}", x); // è¾“å‡ºï¼šx = 5
}
```

# å˜é‡ä¸ä¸å¯å˜æ€§

Rust ä¸­å˜é‡çš„ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼šä¸å¯å˜å˜é‡ï¼ˆ`let`ï¼‰å’Œå¯å˜å˜é‡ï¼ˆ`let mut`ï¼‰ã€‚

ç›¸åŒç‚¹ï¼š

1. å˜é‡éƒ½å¿…é¡»åœ¨å£°æ˜æ—¶åˆå§‹åŒ–ã€‚
2. å˜é‡çš„ç±»å‹åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šäº†ï¼Œä¸èƒ½åœ¨ä¹‹åæ”¹å˜ã€‚

ä¸åŒç‚¹ï¼š

1. `let`ï¼šå˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼Œä¸èƒ½åœ¨ä¹‹åé‡æ–°èµ‹å€¼ã€‚ï¼ˆå¯é‡æ–°ç»‘å®šï¼‰
2. `let mut`ï¼šå˜é‡å¯ä»¥åœ¨ä¹‹åé‡æ–°èµ‹å€¼ã€‚

```rust
fn main(){
    let x = 5;
    let mut y = 5;
    // x = 6; // ç¼–è¯‘é”™è¯¯ï¼Œä¸å¯å˜å˜é‡ä¸èƒ½é‡æ–°èµ‹å€¼
    y = 6; // å¯ä»¥é‡æ–°èµ‹å€¼
    let x = 10; // å¯ä»¥é‡æ–°ç»‘å®š
    println!("x = {}, y = {}", x, y); // è¾“å‡ºï¼šx = 10, y = 6
}
```

ç”±äº Rust æ²¡æœ‰åƒåœ¾å›æ”¶ï¼Œå˜é‡åœ¨è¶…å‡ºä½œç”¨åŸŸåä¼šè¢«è‡ªåŠ¨æ¸…ç†ã€‚å˜é‡é»˜è®¤ä¸å¯å˜ï¼Œç­‰äºæ˜¯åœ¨æé†’å¼€å‘è€…ï¼Œå¦‚æœä»£ç ä¸­ç»™`let`å˜é‡èµ‹å€¼äº†ï¼Œç¼–è¯‘å™¨ä¼šç›´æ¥æŠ¥é”™ï¼ˆä¸å¯å˜çš„åŸå› ï¼Œæœ‰å¾ˆå¤šè§‚ç‚¹ï¼Œè¿™æ˜¯å…¶ä¸­ä¸€ç§è§‚ç‚¹ï¼‰ã€‚

## å¸¸é‡ä¸ä¸å¯å˜å˜é‡çš„åŒºåˆ«

1. å¸¸é‡éœ€è¦æ˜¾ç¤ºå£°æ˜ç±»å‹ï¼›å˜é‡æœ‰ç±»å‹æ¨å¯¼ã€‚
2. å¸¸é‡åªèƒ½ç»‘å®šåˆ°å¸¸é‡è¡¨è¾¾å¼ï¼Œä¸èƒ½ç»‘å®šåˆ°å‡½æ•°è°ƒç”¨çš„è¿”å›å€¼ï¼›è€Œå˜é‡å¯ä»¥ç»‘å®šåˆ°ä»»ä½•è¡¨è¾¾å¼ã€‚
3. å¸¸é‡å¯ä»¥åœ¨ä»»æ„ä½œç”¨åŸŸä¸­å£°æ˜ï¼›è€Œå˜é‡åªèƒ½åœ¨å…¶æ‰€åœ¨çš„ä½œç”¨åŸŸæˆ–æ›´å†…å±‚çš„ä½œç”¨åŸŸä¸­å£°æ˜ã€‚
4. å¸¸é‡ä¸å¯é‡æ–°ç»‘å®šï¼Œå˜é‡å¯é‡æ–°ç»‘å®šã€‚

```rust
const MAX_POINTS: u32 = 100_000;

fn main() {
    let x = 5;
    let x = x + 1; // å˜é‡å¯ä»¥é‡æ–°ç»‘å®š
    // const MAX_POINTS: u32 = 100; // å¸¸é‡ä¸èƒ½é‡æ–°ç»‘å®š
    // MAX_POINTS = 100; // å¸¸é‡ä¸èƒ½é‡æ–°ç»‘å®š
    println!("x = {}, MAX_POINTS = {}", x, MAX_POINTS); // è¾“å‡ºï¼šx = 6, MAX_POINTS = 100_000
}
```

# é™æ€å˜é‡

é™æ€å˜é‡ï¼ˆstatic variableï¼‰æ˜¯æŒ‡åœ¨æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´éƒ½å­˜åœ¨çš„å˜é‡ï¼Œå…¶å€¼åœ¨ç¨‹åºå¼€å§‹æ—¶å°±è¢«åˆå§‹åŒ–ï¼Œå¹¶ä¸”åœ¨ç¨‹åºç»“æŸæ—¶æ‰è¢«é”€æ¯ã€‚é™æ€å˜é‡é€šå¸¸ç”¨äºå­˜å‚¨å…¨å±€çŠ¶æ€ã€å¸¸é‡æˆ–å…±äº«æ•°æ®ã€‚é™æ€å˜é‡çš„å®šä¹‰ä½¿ç”¨ `static` å…³é”®å­—ï¼Œå…¶è¯­æ³•ä¸º`static å˜é‡å: ç±»å‹ = åˆå§‹å€¼;`ï¼Œä¸å¯çœç•¥ç±»å‹å®šä¹‰ã€‚`static`å’Œ`const`åŸºæœ¬ä¸€æ ·ï¼ŒRust ç¨‹åºå‘˜åŸºæœ¬ä¸Šåªä½¿ç”¨`const`ã€‚

```rust
static MAX_POINTS: u32 = 100_000;

fn main() {
    println!("MAX_POINTS = {}", MAX_POINTS); // è¾“å‡ºï¼šMAX_POINTS = 100000
}
```

# æ•°æ®ç±»å‹

Rust æ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œå˜é‡åœ¨ç¼–è¯‘æ—¶å°±å¿…é¡»çŸ¥é“å…¶ç±»å‹ï¼Œåœ¨å®šä¹‰çš„æ—¶å€™ä¸ä¸€å®šè¦æŒ‡å®šç±»å‹ï¼Œåœ¨ä½¿ç”¨å˜é‡çš„æ—¶å€™ä¼šæ ¹æ®ä¸Šä¸‹æ–‡è¿›è¡Œç±»å‹æ¨å¯¼ã€‚Rust ä¸­çš„æ•°æ®ç±»å‹åˆ†ä¸ºä¸¤å¤§ç±»ï¼šæ ‡é‡ï¼ˆscalarï¼‰å’Œå¤åˆï¼ˆcompoundï¼‰ã€‚

# æ ‡é‡ï¼ˆscalarï¼‰

æ ‡é‡ï¼ˆscalarï¼‰ç±»å‹è¡¨ç¤ºä¸€ä¸ªå•ç‹¬çš„å€¼ï¼Œç±»ä¼¼Javaä¸­åŸç”Ÿæ•°æ®ç±»å‹ã€‚Rust æœ‰å››ç§åŸºæœ¬çš„æ ‡é‡ç±»å‹ï¼šæ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”å‹å’Œå­—ç¬¦å‹ã€‚

### æ•´å‹ï¼ˆintegerï¼‰ï¼š
æ•´å‹ï¼ˆintegerï¼‰æ˜¯æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ï¼ŒRust ä¸­çš„æ•´å‹åˆ†ä¸ºæœ‰ç¬¦å·æ•´å‹ï¼ˆsigned integerï¼‰å’Œæ— ç¬¦å·æ•´å‹ï¼ˆunsigned integerï¼‰ã€‚

| ä½é•¿åº¦ | æœ‰ç¬¦å· | æ— ç¬¦å· |
| --- | --- | --- |
| 8-bit | i8 | u8 |
| 16-bit | i16 | u16 |
| 32-bit | i32 | u32 |
| 64-bit | i64 | u64 |
| 128-bit | i128 | u128 |
| arch | isize | usize |

å…¶ä¸­ï¼Œisize å’Œ usize ä¸¤ç§æ•´æ•°ç±»å‹ï¼Œå®ƒä»¬çš„ä½é•¿åº¦å–å†³äºæ‰€è¿è¡Œçš„å¹³å°ï¼Œå¦‚æœæ˜¯ 32 ä½æ¶æ„å°†ä½¿ç”¨ 32 ä½é•¿åº¦æ•´å‹ï¼Œå¦‚æœæ˜¯ 64 ä½æ¶æ„å°†ä½¿ç”¨ 64 ä½é•¿åº¦æ•´å‹ã€‚

æ•´å‹æ”¯æŒä»¥ä¸‹å‡ ç§è¿›åˆ¶è¡¨ç¤ºæ–¹å¼ï¼š

| è¿›åˆ¶ | ä¾‹å­ |
| --- | --- |
| åè¿›åˆ¶ | 12_345 |
| åå…­è¿›åˆ¶ | 0xF0 |
| å…«è¿›åˆ¶ | 0o70 |
| äºŒè¿›åˆ¶ | 0b1111_0000 |
| å­—èŠ‚ï¼ˆç­‰äº u8ï¼‰ | b'A' |

```rust
fn main() {
    let x = 12_345; // åè¿›åˆ¶
    let y = 0xF0; // åå…­è¿›åˆ¶
    let z = 0o70; // å…«è¿›åˆ¶
    let a = 0b1111_0000; // äºŒè¿›åˆ¶
    let b = b'A'; // å­—èŠ‚
    println!("x = {}, y = {:o}, z = {:}, a = {:b}, b = {:?}", x, y, z, a, b);
    // è¾“å‡ºï¼šx = 12345, y = 360, z = 38, a = 11110000, b = 65
}
```

### æµ®ç‚¹å‹ï¼ˆfloating-pointï¼‰ï¼š
æµ®ç‚¹å‹ï¼ˆfloating-pointï¼‰æ˜¯æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ï¼ŒRust ä¸­çš„æµ®ç‚¹å‹åˆ†ä¸ºä¸¤ç§ï¼šf32ï¼ˆå•ç²¾åº¦ï¼‰å’Œ f64ï¼ˆåŒç²¾åº¦ï¼‰ï¼Œé»˜è®¤ç±»å‹æ˜¯ f64ã€‚

æµ®ç‚¹æ•°åœ¨è®¡ç®—æœºä¸­æ˜¯ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºçš„ï¼Œä½†æ˜¯äºŒè¿›åˆ¶æ— æ³•è¡¨ç¤ºæ‰€æœ‰çš„å°æ•°ï¼Œæ‰€ä»¥æµ®ç‚¹æ•°çš„å°æ•°éƒ¨åˆ†æ˜¯ä¸ç²¾ç¡®çš„ã€‚

```rust
fn main() {
    let x = 2.0;
    let y = 1.0 + 0.1 + 0.1;
    println!("x = {}, y = {}", x, y); // è¾“å‡ºï¼šx = 2.0, y = 1.2000000000000002
}
```

### å¸ƒå°”å‹ï¼ˆbooleanï¼‰ï¼š
å¸ƒå°”å‹ï¼ˆbooleanï¼‰åªæœ‰ä¸¤ä¸ªå€¼ï¼štrue å’Œ falseï¼Œç”¨äºè¡¨ç¤ºé€»è¾‘å€¼ã€‚

```rust
fn main() {
    let x = true;
    let y = false;
    println!("x = {}, y = {}", x, y); // è¾“å‡ºï¼šx = true, y = false
}
```

### å­—ç¬¦å‹ï¼ˆcharacterï¼‰ï¼š
å­—ç¬¦å‹ï¼ˆcharacterï¼‰æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼ŒRust ä¸­çš„å­—ç¬¦ç±»å‹æ˜¯ `char`ï¼Œç”¨å•å¼•å·æ‹¬èµ·æ¥ã€‚å­—ç¬¦å‹è¡¨ç¤ºä¸€ä¸ª Unicode æ ‡é‡å€¼ï¼ŒåŒ…æ‹¬å­—æ¯ã€ä¸­æ—¥éŸ©æ–‡ã€æ•°å­—ã€æ ‡ç‚¹ç¬¦å·ã€ç¬¦å·ã€emojiè¡¨æƒ…ç¬¦å·ç­‰ã€‚å®ƒå ç”¨ 4 ä¸ªå­—èŠ‚ï¼Œè¿™æ„å‘³ç€å­—ç¬¦å‹çš„å€¼å¯ä»¥å­˜å‚¨åœ¨ 32 ä½çš„æ•´å‹ä¸­ã€‚ç”±äºæœ‰ä¸åŒçš„ç¼–ç ä¼šå¯¼è‡´æ··ä¹±ï¼Œæ‰€ä»¥åœ¨ Rust ä¸­å­—ç¬¦ä¸²å’Œå­—ç¬¦éƒ½å¿…é¡»ä½¿ç”¨ UTF-8 ç¼–ç ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚

```rust
fn main() {
    let x = 'A';
    let y = 'ä¸­';
    let z = 'ğŸ‰';
    println!("x = {}, y = {}, z = {}", x, y, z); // è¾“å‡ºï¼šx = A, y = ä¸­, z = ğŸ‰
}
```

## å¤åˆï¼ˆcompoundï¼‰

å¤åˆç±»å‹ä¸»è¦æ˜¯å…ƒç»„å’Œæ•°ç»„ã€‚

### å…ƒç»„ï¼ˆtupleï¼‰

å…ƒç»„æ˜¯ä¸€ä¸ªå¯ä»¥åŒ…å«å„ç§ç±»å‹å€¼çš„ç»„åˆï¼Œç”¨ ( ) åŒ…è£¹æ•°æ®ã€‚

- å…ƒç»„ä¸­çš„å…ƒç´ å¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è®¿é—®ï¼Œä¸‹æ ‡ä» 0 å¼€å§‹ã€‚
- å‡½æ•°å¯ä»¥ä½¿ç”¨å…ƒç»„ä½œä¸ºè¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…ƒç»„ä½œä¸ºå‚æ•°ã€‚
- å…ƒç»„å¯ä»¥ä½¿ç”¨è§£æ„ï¼ˆdestructuringï¼‰æ¥è·å–å…ƒç»„ä¸­çš„å…ƒç´ ï¼Œè§£æ„å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥å®ç°ã€‚
- å…ƒç»„å¯ä»¥ä½¿ç”¨`println`æ‰“å°ï¼Œä½†æ˜¯å¤ªé•¿çš„å…ƒç»„æ‰“å°ä¼šæŠ¥é”™ã€‚

```rust
fn reverse(pair: (i32, &str)) -> (&str, i32) {
    // è§£æ„å…ƒç»„
    let (number, string) = pair;

    return (string, number)
}

fn main(){
    let x = (666, "Hello");
    println!("x.0 = {}, x.1 = {}", x.0, x.1); // è¾“å‡ºï¼šx.0 = 666, x.1 = Hello

    let y = reverse(x);
    println!("y = {:?}", y); // è¾“å‡ºï¼šy = ("Hello", 666)
    println!("y.0 = {}, y.1 = {}", y.0, y.1); // è¾“å‡ºï¼šy.0 = Hello, y.1 = 666
}
```
### æ•°ç»„ï¼ˆarrayï¼‰

æ•°ç»„æ˜¯å›ºå®šé•¿åº¦çš„æœ‰åºåˆ—è¡¨ï¼Œä½¿ç”¨æ–¹æ‹¬å· [ ] åŒ…è£¹æ•°æ®ï¼Œå…ƒç´ ä¹‹é—´ç”¨é€—å·åˆ†éš”ã€‚

- æ•°ç»„æ¯ä¸ªå…ƒç´ çš„ç±»å‹å¿…é¡»ç›¸åŒã€‚
- æ•°ç»„çš„é•¿åº¦åœ¨ç¼–è¯‘æ—¶å°±å¿…é¡»ç¡®å®šï¼Œä¸èƒ½æ”¹å˜ã€‚
- æ•°ç»„ä¸­çš„å…ƒç´ å¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è®¿é—®ï¼Œä¸‹æ ‡ä» 0 å¼€å§‹ã€‚
- æ•°ç»„å¯ä»¥ä½¿ç”¨`println`æ‰“å°ï¼Œä½†æ˜¯å¤ªé•¿çš„æ•°ç»„æ‰“å°ä¼šæŠ¥é”™ã€‚
- æ•°ç»„å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡ï¼ˆsliceï¼‰æ¥è·å–æ•°ç»„ä¸­çš„ä¸€éƒ¨åˆ†å…ƒç´ ï¼Œåˆ‡ç‰‡æ˜¯ä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼ŒæŒ‡å‘æ•°ç»„ä¸­çš„ä¸€æ®µè¿ç»­çš„å…ƒç´ ï¼Œåˆ‡ç‰‡çš„ç±»å‹æ˜¯`&[T]`ï¼Œå…¶ä¸­ T æ˜¯æ•°ç»„å…ƒç´ çš„ç±»å‹ã€‚

```rust
fn main() {
    let x = [10, 20, 30];
    println!("x = {:?}, len = {}", x, x.len()); // è¾“å‡ºï¼šx = [10, 20, 30], len = 3

    println!("x[0] = {}, x[2] = {}", x[0], x[2]); // è¾“å‡ºï¼šx[0] = 10, x[2] = 30

    let mut y:[i32; 5] = [100; 5]; // å¯ä»¥åˆå§‹åŒ–ä¸ºä¸€æ ·çš„å€¼
    y[2] = 300;
    println!("y = {:?}", y); // è¾“å‡ºï¼šy = [100, 100, 300, 100, 100]

    let z = &y[2..]; // åˆ‡ç‰‡
    println!("z = {:?}", z); // è¾“å‡ºï¼šz = [300, 100, 100]
    println!("z = {:?}", &y[2..4]); // è¾“å‡ºï¼šz = [300, 100]
}
```
